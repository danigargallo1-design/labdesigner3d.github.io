<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Producto | 3D Factory</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Roboto', sans-serif;
  background:#121212;
  color:#EEE;
  margin:0;
  padding:0;
  overflow-x:hidden;
  scroll-behavior:smooth;
  position:relative;
}

#bgCanvas {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index:-1;
  pointer-events:none;
}

/* Contenedor principal */
.producto-principal-wrapper {
  display:flex;
  flex-wrap:wrap;
  align-items:flex-start;
  max-width:1000px;
  margin:60px auto;
  gap:40px;
  padding:0 20px;
  perspective:1500px;
  transform-style:preserve-3d;
  transition: transform 0.3s ease;
}

/* Imagen con parallax */
.producto-img-container {
  flex:0 0 320px;
  display:flex;
  flex-direction:column;
  gap:20px;
  transition: transform 0.3s ease;
  will-change: transform;
}

.producto-img-container h2 {
  font-size:2rem;
  margin:0;
  transition: color 0.3s ease, transform 0.3s ease;
}

.producto-img-container h2:hover {
  color:#42A5F5;
  transform:scale(1.05);
}

/* Imagen principal */
.producto-img {
  width:100%;
  border-radius:16px;
  transition: transform 0.5s ease, box-shadow 0.5s ease;
  cursor:pointer;
}

/* Quitamos la rotación al hover, solo dejamos el glow / sombra opcional */
.producto-img:hover {
  transform: scale(1.08);
  box-shadow:0 20px 40px rgba(0,0,0,0.5);
}

/* Centrar botón */
.producto-info {
  display:flex;
  justify-content:center;
  margin-top:160px; /* espacio respecto a la imagen */
  width:50%;
}


.producto-info a {
  padding:15px 30px;
  border-radius:12px;
  background:linear-gradient(135deg,#42A5F5,#1565C0,#0D47A1);
  color:#fff;
  text-decoration:none;
  text-align:center;
  font-weight:600;
  font-size:1rem;
  transition:all 0.4s ease, box-shadow 0.4s ease, transform 0.4s ease;
  box-shadow:0 6px 15px rgba(0,0,0,0.5), 0 0 10px rgba(66,165,245,0.7);
  position:relative;
  overflow:hidden;
  animation: glow 2.5s infinite alternate;
}

.producto-info a::after {
  content:"";
  position:absolute;
  top:0; left:-100%;
  width:100%;
  height:100%;
  background:rgba(255,255,255,0.1);
  transform:skewX(-20deg);
  transition: all 0.5s ease;
}

.producto-info a:hover::after {
  left:100%;
}

.producto-info a:hover {
  transform:translateY(-3px) scale(1.07);
  box-shadow:0 12px 25px rgba(0,0,0,0.6), 0 0 20px rgba(66,165,245,0.9);
}

@keyframes glow {
  0% { box-shadow:0 6px 15px rgba(0,0,0,0.5),0 0 10px rgba(66,165,245,0.6);}
  50% { box-shadow:0 8px 20px rgba(0,0,0,0.5),0 0 18px rgba(66,165,245,0.9);}
  100% { box-shadow:0 6px 15px rgba(0,0,0,0.5),0 0 10px rgba(66,165,245,0.6);}
}

/* Descripción */
.producto-desc {
  margin-top:18px;
  max-width:320px;
  font-size:15px;
  line-height:1.6;
  color:#ccc;
  text-align:left;
  word-wrap:break-word;
  transition: transform 0.4s ease;
}

/* Productos similares */
h3 {
  text-align:center;
  margin-top:80px;
  margin-bottom:30px;
  font-size:1.8rem;
  opacity:0;
  transform:translateY(30px);
  transition: all 0.6s ease;
}

h3.visible {
  opacity:1;
  transform:translateY(0);
}

#similares {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:25px;
  max-width:1000px;
  margin:0 auto 60px;
  padding:0 20px;
}

.card {
  background:#1F1F1F;
  border-radius:16px;
  padding:20px;
  text-align:center;
  transition: transform 0.5s ease, box-shadow 0.5s ease;
  cursor:pointer;
  perspective:1000px;
  transform-style:preserve-3d;
}

.card img {
  width:100%;
  border-radius:12px;
  margin-bottom:12px;
  object-fit:cover;
  height:140px;
  transition: transform 0.5s ease, box-shadow 0.5s ease;
}

.card h4 {
  margin-bottom:10px;
  font-weight:500;
  font-size:15px;
  transition: color 0.3s ease, transform 0.3s ease;
}

.card a {
  margin-top:12px;
  display:inline-block;
  color:#42A5F5;
  text-decoration:none;
  font-weight:500;
  transition: color 0.3s ease, transform 0.3s ease;
}

.card a:hover {
  color:#90CAF9;
  transform:translateY(-2px);
}

/* Fade-in y scroll reveal */
.fade-in {
  opacity:0;
  transform:translateY(20px);
  transition: all 0.6s ease;
}

.fade-in.visible {
  opacity:1;
  transform:translateY(0);
}

/* Responsive */
@media(max-width:900px){
  .producto-principal-wrapper{
    flex-direction:column;
    align-items:center;
  }
  .producto-info{
    margin-left:0;
    margin-top:20px;
    width:100%;
    display:flex;
    justify-content:center;
  }
  .producto-desc{
    max-width:90%;
  }
  #similares{
    grid-template-columns:repeat(2,1fr);
  }
}

@media(max-width:500px){
  #similares{
    grid-template-columns:1fr;
  }
}
</style>
</head>
<body>

<canvas id="bgCanvas"></canvas>

<!-- Producto principal -->
<section class="producto-principal-wrapper fade-in" id="producto-principal">
  <div class="producto-img-container">
    <h2 id="producto-titulo">Producto</h2>
    <img id="producto-img" class="producto-img" src="" alt="Producto">
    <p id="producto-desc" class="producto-desc"></p>
  </div>
<div class="producto-info">
  <a href="personalizar.html?id=${id}" id="producto-btn">Personalizar</a>
</div>


<!-- Productos similares -->
<section>
  <h3 id="similares-titulo">Productos similares</h3>
  <div class="cards" id="similares"></div>
</section>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script>
// Productos
const params = new URLSearchParams(window.location.search);
const id = params.get("id");
const productos = {
  "soporte-movil": {nombre:"Soporte móvil", img:"https://media.cgtrader.com/variants/030uc4pdp3lmmmlm0isqdm9jbreb/78add9c2f02fbd73a43ffb3970be38683c5f15eff6ca849dc78c644f4ff9ce1b/magamed%20uchun.webp", desc:"Soporte móvil impreso en PLA de alta calidad, diseñado para ofrecer estabilidad y resistencia. Perfecto para escritorio o mesita de noche, permite colocar tu teléfono en posición vertical u horizontal. Su diseño minimalista y compacto se adapta a cualquier espacio y estilo, y es ideal para videollamadas, ver vídeos o mantener el teléfono siempre a mano mientras trabajas.", similares:["organizador","figura-decorativa"]},
  "organizador": {nombre:"Organizador escritorio", img:"https://makerworld.bblmw.com/makerworld/model/DSM00000001431054/design/2025-05-18_972745f0554be8.png", desc:"Ideal para cables, lápices y accesorios.", similares:["soporte-movil","abridor-botellas"]},
  "figura-decorativa": {nombre:"Figura decorativa", img:"https://images.squarespace-cdn.com/content/v1/67a4dfbf3127d63918313f46/48368308-9dee-441d-914e-ce4e71e27bc0/_MG_8068.jpg", desc:"Pieza decorativa personalizada al gusto.", similares:["soporte-movil","llavero-personalizable"]},
  "abridor-botellas": {nombre:"Abridor de botellas", img:"https://www.3dforprint.com/modelos/2236/soda-bottle-opener1_medium.jpg", desc:"Ideal para la tercera edad.", similares:["organizador","regalo-san-valentin"]},
  "llavero-personalizable": {nombre:"Llavero personalizable", img:"https://media.printables.com/media/prints/4070/images/26377_d636adda-7519-43e0-be16-5be6d01b4ef1/thumbs/inside/1280x960/jpg/untitled345.webp", desc:"Llavero al gusto.", similares:["figura-decorativa","regalo-san-valentin"]},
  "regalo-san-valentin": {nombre:"Regalo San Valentín", img:"https://pic2-cdn.creality.com/comp/model/e5b3c30d11bb403db06c1d53b0fc8377.webp", desc:"Regalo ideal para san valentín.", similares:["llavero-personalizable","abridor-botellas"]}
};

// Mostrar producto
if(productos[id]){
  const p = productos[id];
  document.getElementById("producto-titulo").textContent=p.nombre;
  document.getElementById("producto-img").src=p.img;
  document.getElementById("producto-img").alt=p.nombre;
  document.getElementById("producto-desc").textContent=p.desc;

  const cont = document.getElementById("similares");
  p.similares.forEach((sim,index)=>{
    const s = productos[sim];
    const card = document.createElement("div");
    card.className="card fade-in";
    card.style.transitionDelay = `${index*0.25}s`;
    card.innerHTML=`
      <img src="${s.img}" alt="${s.nombre}">
      <h4>${s.nombre}</h4>
      <a href="producto.html?id=${sim}">Ver producto</a>
    `;
    cont.appendChild(card);
  });
}else{
  document.getElementById("producto-titulo").textContent="Producto no encontrado";
  document.getElementById("producto-img").style.display="none";
  document.getElementById("producto-desc").textContent="";
}

// Fade-in intersection observer
const faders = document.querySelectorAll('.fade-in');
const observer = new IntersectionObserver((entries, obs)=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting){
      entry.target.classList.add('visible');
      obs.unobserve(entry.target);
    }
  });
},{ threshold:0.2 });
faders.forEach(f=>observer.observe(f));

// Mostrar título productos similares
const simTitle = document.getElementById('similares-titulo');
const simObserver = new IntersectionObserver((entries)=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting) simTitle.classList.add('visible');
  });
},{ threshold:0.1 });
simObserver.observe(simTitle);

// Tilt efecto
const tiltCards = document.querySelectorAll('.card');
tiltCards.forEach(card=>{
  card.addEventListener('mousemove', e=>{
    const rect = card.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    const midX = rect.width/2;
    const midY = rect.height/2;
    const rotateX = ((y - midY)/midY)*8;
    const rotateY = ((x - midX)/midX)*8;
    card.style.transform = `rotateX(${-rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
    card.style.boxShadow = `${-rotateY*2}px ${rotateX*2}px 20px rgba(0,0,0,0.5)`;
  });
  card.addEventListener('mouseleave', ()=>{
    card.style.transform="rotateX(0deg) rotateY(0deg) scale(1)";
    card.style.boxShadow="0 8px 20px rgba(0,0,0,0.4)";
  });
});

// Producto principal tilt
const mainProduct = document.getElementById('producto-principal');
mainProduct.addEventListener('mousemove', e=>{
  const rect = mainProduct.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  const midX = rect.width/2;
  const midY = rect.height/2;
  const rotateX = ((y - midY)/midY)*3;
  const rotateY = ((x - midX)/midX)*3;
  mainProduct.style.transform = `rotateX(${-rotateX}deg) rotateY(${rotateY}deg)`;
});
mainProduct.addEventListener('mouseleave', ()=>{
  mainProduct.style.transform="rotateX(0deg) rotateY(0deg)";
});

// Parallax imagen principal
const imgContainer = document.querySelector('.producto-img-container');
window.addEventListener('scroll',()=>{
  const scrollY = window.scrollY;
  imgContainer.style.transform = `translateY(${scrollY*0.05}px)`;
});

// Three.js partículas
let scene, camera, renderer, particles;
scene = new THREE.Scene();
camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 1, 2000);
camera.position.z = 800;

renderer = new THREE.WebGLRenderer({canvas:document.getElementById('bgCanvas'), alpha:true});
renderer.setSize(window.innerWidth, window.innerHeight);

const particleCount = 500;
const geometry = new THREE.BufferGeometry();
const positions = [];
for(let i=0;i<particleCount;i++){
  positions.push((Math.random()-0.5)*2000);
  positions.push((Math.random()-0.5)*2000);
  positions.push((Math.random()-0.5)*2000);
}
geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions,3));

const material = new THREE.PointsMaterial({color:0x42A5F5, size:4, transparent:true, opacity:0.7});
particles = new THREE.Points(geometry, material);
scene.add(particles);

function animate(){
  requestAnimationFrame(animate);
  particles.rotation.y += 0.001;
  particles.rotation.x += 0.0005;
  renderer.render(scene,camera);
}
animate();

window.addEventListener('resize',()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>

</body>
</html>
